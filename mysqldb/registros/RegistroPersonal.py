#!C:\Python34\pythonimport cgiimport sysimport pymysqlprint ("Content-Type:text/html \r\n\r\n")try:	form = cgi.FieldStorage()	nombre=str(form.getvalue('nombre')).upper()	apellidos=str(form.getvalue('apellidos')).upper()	ci=str(form.getvalue('ci')).upper()	telefono=str(form.getvalue('telefono')).upper()	ciudad=str(form.getvalue('ciudad')).upper()	provincia=str(form.getvalue('provincia')).upper()	localidad=str(form.getvalue('localidad')).upper()	direccion=str(form.getvalue('direccion')).upper()	tipo=str(form.getvalue('tipo')).upper()	cad="'"+str(nombre)+"','"+str(apellidos)+"','"+str(ci)+"','"+str(telefono)+"','"+str(ciudad)+"','"+str(provincia)+"','"+str(localidad)+"','"+str(direccion)+"','"+str(tipo)+"'"	con=pymysql.connect(user="root",password="",host="",database="buses_chavarria")	cursor=con.cursor()	cursor.execute("INSERT INTO personal(nombre,apellidos,ci,telefono,ciudad,provincia,localidad,direccion,tipo_personal) VALUES ("+cad+")")	codpersonal=con.cursor()	codpersonal.execute("select * from personal WHERE ci='"+ci+"'")	cod=""	for l in codpersonal:		cod=cod+str(l[0])	if (str(form.getvalue('tipo'))=="SOCIO" and str(form.getvalue('n2'))!="None"):		pla=str(form.getvalue('n2'))		pla=pla.strip("]")		pla=pla.strip("[")		aa=pla.split(",")		pp=""		i=0		pp=""		while (i<len(aa)):			n=aa[i]			n=n.replace(' ','')			n=n.strip("'")			so="'"+str(n).upper()+"','"+str(cod)+"'"			so_cio=con.cursor()			so_cio.execute("INSERT INTO socio(cod_bus,cod_personal) VALUES ("+so+")")			i=i+1	if (( str(form.getvalue('tipo'))=="SOCIO" or str(form.getvalue('tipo'))=="PESONAL DE BUS") and str(form.getvalue('n1'))!="None"): 		p_b="'"+str(form.getvalue('n1')).upper()+"','"+str(cod)+"'"		per_bus=con.cursor()		per_bus.execute("INSERT INTO personal_bus(licencia,cod_personal) VALUES ("+p_b+")") 	elif (str(form.getvalue('tipo'))=="ADMINISTRADOR DE OFICINA" and str(form.getvalue('n1'))!="None"):		p_o="'"+str(form.getvalue('n1')).upper()+"','"+str(cod)+"'"		per_of=con.cursor()		per_of.execute("INSERT INTO personal_oficina(cod_oficina,cod_personal) VALUES ("+p_o+")")	if (str(form.getvalue('tipo'))=="ADMINISTRADOR DE OFICINA" or str(form.getvalue('tipo'))=="SOCIO"):		from random import choice		p=str(nombre)+str(apellidos)+str(ci)		p=p.replace(' ','')		pas = ""		pas = pas.join([choice(p) for i in range(5)])		usu = nombre.split(" ")		busc=con.cursor()		b=busc.execute("select * from usuario where pasword = MD5('"+str(pas)+"')")		while (b=="1"):			pas = ""			pas = pas.join([choice(p) for i in range(5)])			bus=con.cursor()			b=bus.execute("select * from usuario where pasword = MD5('"+str(pas)+"')")		usuario="'"+str(usu[0])+"',MD5('"+str(pas)+"'),'"+str(cod)+"'"		us_r=con.cursor()		us_r.execute("INSERT INTO usuario(user,pasword,cod_personal) VALUES ("+str(usuario)+")")	con.commit()	con.close()	print("<script>location.href='../../administracion/personal.py'</script>")except:	print("<script>location.href='../../error/error.py'</script>")